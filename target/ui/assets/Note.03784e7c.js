import{_ as fe,r as n,a as me,o as xe,D as ke,G as be,w as ye,c as p,d as t,f as a,i as Ce,b as R,j as B,C as he,k as u,l as we,m as s,g as i,F as w,B as V,A as y,y as S,H as z,u as Ve,I as Se,x as ze,e as F,p as $e,q as Pe}from"./index.4e24e414.js";import{S as Ne}from"./SplitPane.a7162a6b.js";const X=$=>($e("data-v-b21b171d"),$=$(),Pe(),$),Ue={class:"doc-body","element-loading-background":"rgba(255, 255, 255, 0.8)","element-loading-text":"\u6570\u636E\u52A0\u8F7D\u4E2D..."},Ie=X(()=>F("span",null," \u7528\u6237\u7EC4",-1)),Te=X(()=>F("span",null,"\u6807\u7B7E",-1)),Be={key:0},Fe={class:"dialog-footer"},De={__name:"Note",setup($){const P=n(!1);n();const L=n(),N=Ce(),x=n(255),_=n(0),c=n(""),f=n(""),m=n(""),b=n({});b.value=N.getters.getUserInfo;const Y=n("");Y.value=N.getters.getRole,n(""),n(null);const C=n(0),D=n();D.value=b.value.noteTags;const O=n({}),d=n({currentPage:1,pageSize:13,total:0,userName:"",name:"",description:""}),Z=o=>{d.value.currentPage=o,r()},ee=o=>{d.value.pageSize=o,d.value.currentPage=1,r()};me([{value:"markdown",label:"markdown"},{value:"word",label:"word"},{value:"txt",label:"txt"},{value:"excel",label:"excel"},{value:"file",label:"\u5176\u4ED6"}]);const U=n(),g=n({title:"",tags:""}),le=n({title:[{required:!0,message:"\u8BF7\u586B\u5199\u6587\u6863\u540D\u79F0",trigger:"change"},{max:50,message:"\u6700\u5927\u957F\u5EA6\u4E0D\u53EF\u8D85\u8FC750\u5B57",trigger:"change"}]}),h=n(!1),K=n(!0),M=n(!1),q=n([]),ae=o=>{q.value=o,K.value=!1},r=()=>{let o="";o+="/api/note/noteList?role="+x.value,_.value!==0&&(o+="&isDelete="+_.value),c.value!==""&&(o+="&keyword="+c.value),f.value!==""&&(o+="&tag="+f.value),m.value!==""&&(o+="&group="+m.value),d.value.currentPage&&(o+="&page="+d.value.currentPage),d.value.pageSize&&(o+="&limit="+d.value.pageSize),R.get(o).then(e=>{d.value.currentPage=e.data.current,d.value.pageSize=e.data.size,d.value.total=e.data.total,L.value=e.data.records}).catch(e=>{B.error({message:e.response.data,duration:1e3,showClose:!0})})},te=()=>{let o="/api/userGroup/list?role=255";R.get(o).then(e=>{O.value=e.data}).catch(e=>{B.error({message:e.response.data,duration:1e3,showClose:!0})})};xe(()=>{r(),te()});const oe=o=>{M.value=o},ne=()=>{U.value.validate(o=>{o&&(P.value=!0,g.value.tags=g.value.tags.toString(),R.post("/api/note/create",g.value).then(e=>{r(),U.value.resetFields(),P.value=!1,h.value=!1,e.data.tags!=""&&(b.value.noteTags=e.data.tags,D.value=e.data.tags,N.commit("saveNoteTags",b.value.noteTags)),B.success({message:"\u65B0\u5EFA\u6210\u529F",duration:1e3,showClose:!0})}).catch(e=>{P.value=!1,B.error({message:e.response.data,duration:1e3,showClose:!0})}))})},ue=he(),E=n();E.value=ue.fullPath,ke((o,e)=>{E.value=o.fullPath,r()});const j=n();j.value=N.getters.getDocChange,be(j,(o,e)=>{});const se=o=>{for(var e="",I=1;I<o.level;I++)e+="\xA0\xA0\xA0\xA0";return e+o.text};return(o,e)=>{const I=u("Plus"),re=u("el-icon"),G=u("el-button"),v=u("el-menu-item"),A=u("el-sub-menu"),T=u("el-menu"),H=u("el-scrollbar"),W=u("el-input"),ie=u("el-pagination"),de=u("RouterView"),J=u("el-form-item"),ve=u("el-option"),ce=u("el-select"),ge=u("el-form"),pe=u("el-dialog"),_e=we("loading");return ye((s(),p("div",Ue,[t(H,{height:"calc(93.5vh)"},{default:a(()=>[t(T,{class:"doc-menu","default-active":"all"},{default:a(()=>[t(G,{type:"primary",class:"doc-btn",onClick:e[0]||(e[0]=l=>h.value=!0),disabled:M.value},{default:a(()=>[t(re,null,{default:a(()=>[t(I)]),_:1}),i(" \xA0\u65B0\u5EFA ")]),_:1},8,["disabled"]),t(v,{index:"all",onClick:e[1]||(e[1]=l=>(m.value="",x.value=255,_.value=0,c.value="",f.value="",r()))},{default:a(()=>[i("\u5168\u90E8")]),_:1}),t(v,{index:"myNotes",onClick:e[2]||(e[2]=l=>(m.value="",x.value=0,_.value=0,c.value="",f.value="",r()))},{default:a(()=>[i("\u6211\u7684\u7B14\u8BB0")]),_:1}),t(A,{index:"userGroup"},{title:a(()=>[Ie]),default:a(()=>[(s(!0),p(w,null,V(O.value,(l,k)=>(s(),y(v,{index:l.name,key:k,onClick:Q=>(m.value=l.belong,f.value="",x.value=255,_.value=0,c.value="",r())},{default:a(()=>[i(S(l.name),1)]),_:2},1032,["index","onClick"]))),128))]),_:1}),t(A,{index:"tags"},{title:a(()=>[Te]),default:a(()=>[b.value.noteTags!=""?(s(),p("div",Be,[(s(!0),p(w,null,V(b.value.noteTags,(l,k)=>(s(),y(v,{index:l,key:k,onClick:Q=>(m.value="",f.value=l,x.value=255,_.value=0,c.value="",r())},{default:a(()=>[i(S(l),1)]),_:2},1032,["index","onClick"]))),128))])):z("",!0)]),_:1}),t(v,{index:"share",onClick:e[3]||(e[3]=l=>(m.value="",x.value=254,_.value=0,f.value="",c.value="",r()))},{default:a(()=>[i("\u4E0E\u6211\u5206\u4EAB")]),_:1}),t(v,{index:"recycleBin",onClick:e[4]||(e[4]=l=>(m.value="",_.value=1,x.value=255,c.value="",f.value="",r()))},{default:a(()=>[i("\u56DE\u6536\u7AD9")]),_:1})]),_:1})]),_:1}),t(Ne,{min:230,class:"doc-aside"},{left:a(()=>[t(H,{height:"calc(93.5vh)"},{default:a(()=>[t(T,{class:"doc-menu",router:""},{default:a(()=>[t(W,{placeholder:"\u641C\u7D22",modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=l=>c.value=l),"prefix-icon":Ve(Se),onKeydown:e[6]||(e[6]=ze(l=>r(),["enter"])),onClear:e[7]||(e[7]=l=>r()),clearable:""},null,8,["modelValue","prefix-icon"]),F("div",null,[t(T,{mode:"horizontal",ellipsis:!1},{default:a(()=>[t(v,{onClick:e[8]||(e[8]=l=>C.value=0),index:"\u76EE\u5F55"},{default:a(()=>[i("\u6587\u4EF6\u76EE\u5F55")]),_:1}),t(v,{onClick:e[9]||(e[9]=l=>C.value=1),index:"\u5927\u7EB2",disabled:K.value},{default:a(()=>[i("\xA0\xA0\u5927\u7EB2\xA0\xA0 ")]),_:1},8,["disabled"])]),_:1})]),C.value==0?(s(!0),p(w,{key:0},V(L.value,(l,k)=>(s(),p("div",{key:k},[l.remark==""?(s(),y(v,{key:0,index:"/index/noteList/"+l.id},{default:a(()=>[i(S(l.title),1)]),_:2},1032,["index"])):l.remark!==""?(s(),y(v,{key:1,index:"/index/noteList/"+l.id},{default:a(()=>[i(S(l.remark),1)]),_:2},1032,["index"])):z("",!0)]))),128)):z("",!0),C.value==0?(s(),y(ie,{key:1,style:{"margin-top":"15px","margin-left":"15px"},class:"pagiantion","current-page":d.value.currentPage,"page-size":d.value.pageSize,"page-sizes":[10],layout:"total,  prev, pager, next","pager-count":5,total:d.value.total,onCurrentChange:Z,small:"",onSizeChange:ee},null,8,["current-page","page-size","total"])):z("",!0),t(T,null,{default:a(()=>[C.value==1?(s(!0),p(w,{key:0},V(q.value,(l,k)=>(s(),p("div",{key:k},[t(v,{index:l.text,onClick:Q=>l.node.scrollIntoView()},{default:a(()=>[i(S(se(l)),1)]),_:2},1032,["index","onClick"])]))),128)):z("",!0)]),_:1})]),_:1})]),_:1})]),right:a(()=>[t(de,{"onUpdate:change":r,"onUpdate:editing":oe,"onUpdate:outline":ae}),t(pe,{modelValue:h.value,"onUpdate:modelValue":e[13]||(e[13]=l=>h.value=l),"close-on-click-modal":!1,"show-close":!1,title:"\u6587\u6863",width:"30%"},{footer:a(()=>[F("span",Fe,[t(G,{onClick:e[12]||(e[12]=l=>{h.value=!1,g.value.title=null,g.value.tags="",U.value.resetFields()})},{default:a(()=>[i(" \u53D6\u6D88 ")]),_:1}),t(G,{type:"primary",onClick:ne},{default:a(()=>[i("\u63D0\u4EA4")]),_:1})])]),default:a(()=>[t(ge,{ref_key:"ruleForm",ref:U,model:g.value,rules:le.value,"label-width":"120px"},{default:a(()=>[t(J,{label:"\u540D\u79F0",prop:"title",style:{width:"80%"}},{default:a(()=>[t(W,{modelValue:g.value.title,"onUpdate:modelValue":e[10]||(e[10]=l=>g.value.title=l)},null,8,["modelValue"])]),_:1}),t(J,{label:"\u6807\u7B7E",prop:"tags",style:{width:"80%"}},{default:a(()=>[t(ce,{modelValue:g.value.tags,"onUpdate:modelValue":e[11]||(e[11]=l=>g.value.tags=l),placeholder:"\u8BF7\u6DFB\u52A0\u6807\u7B7E",multiple:"",filterable:"","default-first-option":"","allow-create":""},{default:a(()=>[(s(!0),p(w,null,V(D.value,l=>(s(),y(ve,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1})])),[[_e,P.value]])}}},Le=fe(De,[["__scopeId","data-v-b21b171d"]]);export{Le as default};
