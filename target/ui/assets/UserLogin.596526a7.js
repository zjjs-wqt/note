import{_ as E,r as p,a as C,o as N,b as y,c as x,w as m,d as s,e as o,f as _,g as f,v as U,u as v,E as M,h as b,i as z,j as d,k as D,l as G,m as V,n as B,p as O,q as j}from"./index.4e24e414.js";import{G as L}from"./GInput.b20708e8.js";const q=n=>(O("data-v-4465051f"),n=n(),j(),n),P={class:"wrapper"},R={class:"container","element-loading-background":"rgba(255, 255, 255, 0.8)","element-loading-text":"\u6570\u636E\u52A0\u8F7D\u4E2D..."},T=q(()=>o("div",{style:{margin:"50px 15px"}},[o("h1",{style:{"font-size":"40px","text-align":"center"}},"\u7B14\u8BB0\u7BA1\u7406\u7CFB\u7EDF")],-1)),A={class:"hit",style:{color:"#d93025"}},F={class:"hit",style:{color:"#d93025"}},H={class:"ensure-container"},J={__name:"UserLogin",setup(n){const u=p(!1),r=p(""),l=p(""),t=b(),h=z(),a=C({username:!1,password:!1}),g=()=>{if(r.value==""){d.error("\u8D26\u6237\u4FE1\u606F\u4E3A\u7A7A");return}if(l.value==""){d.error("\u767B\u5F55\u53E3\u4EE4\u4E3A\u7A7A");return}u.value=!0,y.post("/api/login",{username:r.value,password:l.value}).then(e=>{e.data.type=="user"?(t.push({name:"NoteList"}),e.data.imgSrc="/api/user/avatar?id="+e.data.id):e.data.type=="admin"?t.push({name:"UserManagement"}):e.data.type=="audit"&&t.push({name:"OperationLog"}),h.commit("saveUserInfo",e.data)}).catch(e=>{e.response.status==500?d.error({message:"\u7F51\u7EDC\u65E0\u6CD5\u8FDE\u63A5",duration:2e3,showClose:!0}):d.error({message:e.response.data,duration:2e3,showClose:!0})}).finally(()=>{u.value=!1})},I=e=>{e!=""?a.username=!1:a.username=!0},S=e=>{e!=""?a.password=!1:a.password=!0};return N(()=>{y.get("/api/check").then(e=>{e.data.type=="user"?(t.push({name:"NoteList"}),e.data.imgSrc="/api/user/avatar?id="+e.data.id):e.data.type=="admin"?t.push({name:"UserManagement"}):e.data.type=="audit"&&t.push({name:"OperationLog"}),h.commit("saveUserInfo",e.data)}).catch(()=>{})}),(e,i)=>{const w=D("el-icon"),k=G("loading");return V(),x("div",P,[m((V(),x("div",R,[T,s(L,{err:a.username,onBlur:I,modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=c=>r.value=c),placeholder:"\u5DE5\u53F7 \u624B\u673A\u53F7 \u90AE\u7BB1"},null,8,["err","modelValue"]),m(o("div",A,[s(w,null,{default:_(()=>[s(v(B))]),_:1}),f("\u8D26\u6237\u4FE1\u606F\u4E3A\u7A7A ")],512),[[U,a.username]]),s(L,{err:a.password,onBlur:S,style:{"margin-top":"15px"},modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=c=>l.value=c),type:"password",placeholder:"\u767B\u5F55\u53E3\u4EE4",onEnter:g},null,8,["err","modelValue"]),m(o("div",F,[s(w,null,{default:_(()=>[s(v(B))]),_:1}),f("\u53E3\u4EE4\u4E0D\u80FD\u4E3A\u7A7A ")],512),[[U,a.password]]),o("div",H,[s(v(M),{onClick:g,size:"large",style:{"font-size":"16px",width:"100%"},type:"primary"},{default:_(()=>[f(" \u767B \u5F55 ")]),_:1})])])),[[k,u.value]])])}}},W=E(J,[["__scopeId","data-v-4465051f"]]);export{W as default};
